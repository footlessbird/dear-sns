{"version":3,"file":"static/webpack/static/development/pages/_app.js.04d3f226599cafeff6ac.hot-update.js","sources":["webpack:///./pages/_app.js"],"sourcesContent":["import React from \"react\";\nimport Head from \"next/head\";\nimport PropTypes from \"prop-types\";\nimport withRedux from \"next-redux-wrapper\";\nimport withReduxSaga from \"next-redux-saga\";\nimport { createStore, compose, applyMiddleware } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport axios from \"axios\";\nimport Layout from \"../components/Layout\";\nimport rootReducer from \"../reducers\";\nimport rootSaga from \"../sagas\";\nimport { LOAD_USER_REQUEST } from \"../reducers/user\";\n\nconst Dear = ({ Component, store, pageProps }) => {\n  console.log(pageProps);\n  return (\n    <Provider store={store}>\n      <Head>\n        <title>Dear</title>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://cdnjs.cloudflare.com/ajax/libs/antd/3.18.1/antd.css\"\n        />\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/antd/3.18.1/antd.js\" />\n        <link\n          rel=\"stylesheet\"\n          type=\"text/css\"\n          charset=\"UTF-8\"\n          href=\"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick.min.css\"\n        />\n        <link\n          rel=\"stylesheet\"\n          type=\"text/css\"\n          href=\"https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.6.0/slick-theme.min.css\"\n        />\n      </Head>\n      <Layout>\n        <Component {...pageProps} />\n      </Layout>\n    </Provider>\n  );\n};\n\nDear.propTypes = {\n  Component: PropTypes.elementType.isRequired,\n  store: PropTypes.object.isRequired,\n  pageProps: PropTypes.object.isRequired\n};\n// next가 실행해줌\n\n// Dear.getInitialProps = async context => {\n//   console.log(context);\n//   const { ctx, Component } = context;\n//   let pageProps = {};\n\n//   const state = ctx.store.getState();\n//   const cookie = ctx.isServer ? ctx.req.headers.cookie : \"\";\n//   console.log(cookie);\n//   if (ctx.isServer && cookie) {\n//     axios.defaults.headers.Cookie = cookie;\n//   }\n\n//   if (!state.user.me) {\n//     ctx.store.dispatch({\n//       type: LOAD_USER_REQUEST\n//     });\n//   }\n\n//   if (Component.getInitialProps) {\n//     pageProps = await Component.getInitialProps(ctx);\n//   }\n\n//   return { pageProps };\n// };\n\nDear.getInitialProps = async (context) => {\n  console.log(context)\n  const { ctx, Component } = context;\n  let pageProps = {};\n  const state = ctx.store.getState();\n  const cookie = ctx.isServer ? ctx.req.headers.cookie : '';\n  console.log(cookie)\n  if (ctx.isServer && cookie) {\n    axios.defaults.headers.Cookie = cookie;\n  }\n  if (!state.user.me) {\n    ctx.store.dispatch({\n      type: LOAD_USER_REQUEST,\n    });\n  }\n  if (Component.getInitialProps) {\n    pageProps = await Component.getInitialProps(ctx) || {};\n  }\n  return { pageProps };\n};\n\nconst configureStore = (initialState, options) => {\n  const sagaMiddleware = createSagaMiddleware();\n  const middlewares = [sagaMiddleware];\n  const enhancer =\n    process.env.NODE_ENV === \"production\"\n      ? compose(applyMiddleware(...middlewares))\n      : compose(\n          applyMiddleware(...middlewares),\n          !options.isServer &&\n            window.__REDUX_DEVTOOLS_EXTENSION__ !== \"undefined\"\n            ? window.__REDUX_DEVTOOLS_EXTENSION__()\n            : f => f\n        );\n\n  const store = createStore(rootReducer, initialState, enhancer);\n  store.sagaTask = sagaMiddleware.run(rootSaga);\n  return store;\n};\n\nexport default withRedux(configureStore)(withReduxSaga(Dear)); // HOC\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAFA;AAIA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AAHA;AAWA;AACA;AACA;AACA;AACA;AACA;AAHA;AAOA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AAfA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAgBA;AACA;AAjBA;AAAA;AAkBA;AAAA;AACA;AAnBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAoBA;AACA;AACA;AACA;AAQA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}